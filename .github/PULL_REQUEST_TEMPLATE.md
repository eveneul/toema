
---

# Medium

## 과제 체크포인트

### 기본과제

#### Medium

- [ ] 총 11개의 파일, 115개의 단위 테스트를 무사히 작성하고 통과시킨다.

#### 질문

> Q. medium.useEventOperations.spec.tsx > 아래 toastFn과 mock과 이 fn은 무엇을 해줄까요?
해당 상황에 맞는 호출 메세지 결과가 나왔는지 알 수 있게 해줍니다.

> Q. medium.integration.spec.tsx > 여기서 ChakraProvider로 묶어주는 동작은 의미있을까요? 있다면 어떤 의미일까요?

일정에 대한 데이터들을 하위 컴포넌트로 전달할 수 있어 데이터 사용에 편의성을 증가시킨다...?



> Q. handlersUtils > 아래 여러가지 use 함수는 어떤 역할을 할까요? 어떻게 사용될 수 있을까요?
특정 상황에 맞는 api를 호출시킬 때 필요한 것 같습니다. (상황에 맞는 응답값을 설정하기 위해)

> Q. setupTests.ts > 왜 이 시간을 설정해주는 걸까요?
테스트마다 기간들을 다 설정하면 불필요한 코드의 반복이 생길 수 있으니 테스트전 특정 시간을 고정시켜놓고 일괄적으로 테스트를 돌리기 위해서(..?)

### 심화 과제

- [ ] App 컴포넌트 적절한 단위의 컴포넌트, 훅, 유틸 함수로 분리했는가?
- [ ] 해당 모듈들에 대한 적절한 테스트를 2개 이상 작성했는가?

## 과제 셀프회고

개념파악은 됏지만 어떻게 응용해야될지 생각하는데 너무 많은 시간이 들어서 힘들엇다. 앞으로도 계속 이렇게 많은 시간이 걸린다는 생각을 하면 아찔하다.
테스트가 통과되었어도 내가 작성한 코드가 맞게 작성한 것인지 의문이 계속 들었고 리팩토링을 하고 싶어도 어디서부터 시작해야 될 지 모르겟다.(마음에 안드는 부분이 많아서)


### 기술적 성장

테스트 코드 라이브러리 자체를 처음 알게 되었으며 
전반적으로 테스트 코드에 대한 개념,Vitest API의 전박적인 사용법을 알게 되었다.
단위 테스트를 작성하면서 처음에는 시작을 어떻게 해야될 지 몰라서 고민하는 시간이 많았으나 헤딩하다보니 느낌이 조금 온 것 같다. 그리고 실무에서 리액트를 써본 경험이 거의 없어서 코드 구조 파악에도 시간이 좀 걸렷으며 다양한 리액트 훅을 숙지하게 되었다.


### 코드 품질

확실히 처음 접해보는 개념이라서 코드를 작성하면서도 이게 맞나(?)하는 생각이 들어서 막상 완성하고 보니 너무 허접한 느낌이 든다.
medium.integration.spec.tsx쪽이 검증하는데 시간이 오래 걸려서 리팩토링이 필요한 것 같다. 실제로도 작성하면서 오류를 많이 봤던 부분이기도 하다.

### 학습 효과 분석

msw에 대한 전반적인 이해도가 많이 떨어지는 것 같아 많은 예시를 보고 리뷰를 해봐야 될 것 같다.
api 테스트를 하는 부분은 실무에서 확실히 사용하면 좋을 것 같다는 생각이 들어 더 공부해봐야 될 것 같다.
과제도 처음 hard로 시작하다가 msw쪽은 어떻게 시작을 할지 출발점 조차 잡지를 못해 난이도를 조정한 만큼 더 학습을 해야 할 거 같다.


### 과제 피드백

디스크립션이 예외적인 상황이 많이 발생할 경우 해당하는 예외상황을 다 
임의의 데이터로 만들어서 테스트를 해야하는지 애매했다.



## 리뷰 받고 싶은 내용

1. medium.integration.spec.tsx에서 테스트 시 
   - 일정 CRUD 및 기본 기능 > 입력한 새로운 일정 정보에 맞춰 모든 필드가 이벤트 리스트에 정확히 저장된다. 
   - 일정 CRUD 및 기본 기능 > 기존 일정의 세부 정보를 수정하고 변경사항이 정확히 반영된다  
   - 일정 CRUD 및 기본 기능 > 일정을 삭제하고 더 이상 조회되지 않는지 확인한다
   - 일정 충돌 > 겹치는 시간에 새 일정을 추가할 때 경고가 표시된다
   - 일정 충돌 > 기존 일정의 시간을 수정하여 충돌이 발생하면 경고가 노출된다
   - notificationTime을 10으로 하면 지정 시간 10분 전 알람 텍스트가 노출된다
해당 부분에서 테스트 검증 소요시간이 많이 걸리는데 타이머 설정 상의 문제일까요??
어느 부분에서 리소스를 많이 잡아먹고 어떤 방향으로 고쳐야 하는지 예시와 함께 피드백 부탁드립니다.

2. 
``` ts
it("주간 뷰에서 다음으로 navigate시 7일 후 '2025-10-08' 날짜로 지정이 된다", () => {
  const {result} = renderHook(() => useCalendarView());

  act(() => {
    result.current.setView('week');
  });

  act(() => {
    result.current.navigate('next');
  });

  expect(result.current.currentDate.toISOString().slice(0, 10)).toEqual('2025-10-08');
});

```
해당 부분의 코드처럼 상태변화를 순서대로 해주는 경우가 많을경우 위의 상황처럼 act를 여러번 반복해서 작성해야하는건가요? 대체할 다른 테스트 코드 작성법이 있는건가요? 아니면 테스트 코드말고 기능 구현 코드가 잘못되었다고 생각하고 수정해야하는 건가요?  


3.
```ts
it('일정을 삭제하고 더 이상 조회되지 않는지 확인한다', async () => {
    // 현재 일정 목록 확인
    // 첫번쨰 일정 가져와서 삭제
    // 테스트
    const { user } = setup(<App />);

    const eventList = within(screen.getByTestId('event-list'));

    const searchInput = screen.getByLabelText('일정 검색');
    await user.type(searchInput, '기존 회의');

    // 이벤트가 있는지 체크
    expect(eventList.getByText('기존 회의')).toBeInTheDocument();

    //삭제 =>검색어가 입력되어 있는 상태
    const deleteButton = eventList.getByRole('button', { name: 'Delete event' });

    await user.click(deleteButton);

    // 검색어 삭제안하고 하려니 eventList를 못불러오는 이슈
    await user.clear(searchInput);

    // 삭제되는 작업 
    await waitFor(() => {
      expect(eventList.queryByText('검색 결과가 없습니다.')).not.toBeInTheDocument();
    });
  });
```
일정 삭제를 테스트 할 때 삭제 되었는지 확인하기 위해 검색어를 이용했는데 
초반에 생각했던건 삭제 후 다시 렌더링 될 때 일정 리스트에서 해당 이벤트가 없는것으로
검증하려다가 구현이 힘들어 해당 방법을 채택했습니다. 어느 방법이 옳은 방법인가요?
그리고 초반에 생각했던대로 구현하려면 어떻게 작성해야 할까요?

4.

```ts
it('이미 알림이 발생한 이벤트에 대해서는 중복 알림이 발생하지 않아야 한다', () => {
    const fakeTime = new Date('2025-10-21 08:57');
    vi.setSystemTime(fakeTime);

    const {result} = renderHook(()=> useNotifications(event));

    act(() => {
        vi.advanceTimersByTime(1000);
    });

    // 알람이 생성되어 있는지 확인
    expect(result.current.notifications).toHaveLength(1);
    expect(result.current.notifiedEvents).toHaveLength(1);

    act(() => {
        vi.advanceTimersByTime(2000);
    });

    // 2초뒤에 다시 체크하는게 맞나..?
    expect(result.current.notifiedEvents).toHaveLength(1);

});

```
위의 테스트에서 중복을 체크하기 위해 2초 후의 notifiedEvents를 체크했는데 이렇게 구현하는게 맞나요?? 제가 생각하기엔 중복 알림이 들어갈때 딜레이가 생겨서 늦에 notifiedEvents에 들어가면 이 검증은 틀린 검증이지 않을까 하는 생각이 들어서 잘못 작성된 테스트 코드라고 생각합니다.


---

## 궁금한 점

대부분 테스트 코드를 작성할 때 디스크립션에 맞는 상황 데이터(예시)를 무조건 박아놓고 시작하나요?? 아니면 내부로직에서 상황에 맞게 데이터를 변경해가면서 하나요? 후자의 방법으로 하면 테스트 코드도 길어지고 복잡해 질 것 같다는 생각이 듭니다.



## 과제를 수행하면서 느낀점

### 과제 시작 전 생각
hard부터 시작하는게 좋다는 소리를 듣고 ts,react 초보인 내가 정말 할 수 있을까라는 걱정에 눈앞이 캄캄했으며 기간안에 할 수 있을까 하는 그냥 걱정거리가 많았다.

### 과제 제출 후 생각

어렵다.
확실히 내가 프론트엔드 지식이 부족한 만큼 남들보다 시간이 오래 걸리고 진도가 잘 안나가니 너무 답답하고 짜증이 낫다. 난이도를 바꿧음에도 진도가 잘 안나가는 건 마찬가지라서 한숨만 나온다...ㅜ

## 기타



### 과제 난이도

5점